license to wed is a 2007 american romantic comedy film directed by john krasinski and starring mandy moore , john krasinski and robin williams . it was released in the united states by warner bros . pictures .