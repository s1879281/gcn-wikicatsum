is a 2009 american comedy film written and directed by marc webb . it is based on the novel of the same name by jonathan parker , who also wrote the screenplay .