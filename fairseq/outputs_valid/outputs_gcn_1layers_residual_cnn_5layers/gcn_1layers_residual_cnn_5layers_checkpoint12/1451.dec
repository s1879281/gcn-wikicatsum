a midsummer night 's sex comedy is a 1982 american sex comedy film directed by woody allen and starring woody allen , kevin kline and rupert everett . the film is based on the play of the same name by william shakespeare .