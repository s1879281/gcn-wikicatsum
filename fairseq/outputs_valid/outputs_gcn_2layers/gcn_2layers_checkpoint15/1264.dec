nutcracker is a 1999 american fantasy film directed by john schlesinger and written by john t. a. hoffmann , based on the novel of the same name by e. t. a. hoffmann .