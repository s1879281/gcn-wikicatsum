we are marshall is a 2006 american sports drama film written and directed by allan dwan , based on the novel we are marshall .